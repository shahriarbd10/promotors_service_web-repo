{"ast":null,"code":"import _objectSpread from\"E:/project/assign11/clint/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useContext}from\"react\";import{useForm}from\"react-hook-form\";import{AuthContext}from\"../../contexts/UserContext\";import swal from'sweetalert';import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddProduct=function AddProduct(){var _errors$name,_errors$price,_errors$rating,_errors$description,_errors$img;var _useContext=useContext(AuthContext),user=_useContext.user,Refresh=_useContext.Refresh,setRefresh=_useContext.setRefresh;var _useForm=useForm(),register=_useForm.register,errors=_useForm.formState.errors,handleSubmit=_useForm.handleSubmit;var navigate=useNavigate();var handleAddProduct=function handleAddProduct(data){var image=data.img[0];var formData=new FormData();formData.append('image',image);var url='https://api.imgbb.com/1/upload?key=6b61fed2ade9e1cb6596b28fb4315762';fetch(url,{method:'POST',body:formData}).then(function(res){return res.json();}).then(function(imageData){if(imageData.success){var product={name:data.name,mail:data.mail,price:data.price,rating:data.rating,description:data.description,img:imageData.data.url};console.log(product);fetch('https://pro-motors.vercel.app/product',{method:'POST',headers:{'content-type':'application/json',authorization:\" Bearer \".concat(localStorage.getItem('secret-token'))},body:JSON.stringify(product)}).then(function(res){return res.json();}).then(function(result){console.log(result);setRefresh(!Refresh);swal({title:\"Good job!\",text:\"\".concat(data.name,\" is successfully added\"),icon:\"success\",button:\"DONE\"});navigate('/allService');}).catch(function(err){return console.error(err);});}});};return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center  bg-gray-900\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card w-96  bg-gray-900 shadow-2xl \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body items-center text-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-white\",children:\"ADD PRODUCT\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"mt-6 text-center pb-6\",onSubmit:handleSubmit(handleAddProduct),children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({className:\"input input-bordered w-full max-w-xs mt-6\",value:user===null||user===void 0?void 0:user.email},register(\"mail\")),{},{type:\"text\"})),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({className:\"input input-bordered w-full max-w-xs mt-6\",placeholder:\"name\"},register(\"name\",{required:\"name is required\"})),{},{type:\"text\"})),errors.name&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600\",children:(_errors$name=errors.name)===null||_errors$name===void 0?void 0:_errors$name.message}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({className:\"input input-bordered w-full max-w-xs mt-6\",placeholder:\"price\"},register(\"price\",{required:\"price is required\"})),{},{type:\"text\"})),errors.price&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600\",children:(_errors$price=errors.price)===null||_errors$price===void 0?void 0:_errors$price.message}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({className:\"input input-bordered w-full max-w-xs mt-6\",placeholder:\"rating\"},register(\"rating\",{required:\"rating is required\"})),{},{type:\"text\"})),errors.rating&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600\",children:(_errors$rating=errors.rating)===null||_errors$rating===void 0?void 0:_errors$rating.message}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({className:\"input input-bordered w-full max-w-xs mt-6\",placeholder:\"description\"},register(\"description\",{required:\"description is required\"})),{},{type:\"text\"})),errors.description&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600\",children:(_errors$description=errors.description)===null||_errors$description===void 0?void 0:_errors$description.message}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({className:\"input input-bordered w-full max-w-xs mt-6\"},register(\"img\",{required:\"image is required\"})),{},{type:\"file\",alt:\"img\",placeholder:\"picture url\"})),errors.img&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600\",children:(_errors$img=errors.img)===null||_errors$img===void 0?void 0:_errors$img.message}),/*#__PURE__*/_jsx(\"input\",{className:\"btn w-full max-w-xs mt-6 \",value:\"Submit\",type:\"submit\"})]})]})})});};export default AddProduct;","map":{"version":3,"names":["React","useContext","useForm","AuthContext","swal","useNavigate","jsx","_jsx","jsxs","_jsxs","AddProduct","_errors$name","_errors$price","_errors$rating","_errors$description","_errors$img","_useContext","user","Refresh","setRefresh","_useForm","register","errors","formState","handleSubmit","navigate","handleAddProduct","data","image","img","formData","FormData","append","url","fetch","method","body","then","res","json","imageData","success","product","name","mail","price","rating","description","console","log","headers","authorization","concat","localStorage","getItem","JSON","stringify","result","title","text","icon","button","catch","err","error","className","children","onSubmit","_objectSpread","value","email","type","placeholder","required","message","alt"],"sources":["E:/project/assign11/clint/src/Pages/AddProduct/AddProduct.js"],"sourcesContent":["import React, { useContext } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { AuthContext } from \"../../contexts/UserContext\";\r\nimport swal from 'sweetalert';\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst AddProduct = () => {\r\n    const {user ,Refresh , setRefresh} = useContext(AuthContext);\r\n    \r\n    const { register, formState: { errors }, handleSubmit } = useForm();\r\n    const navigate = useNavigate();\r\n    const handleAddProduct = (data) => {\r\n        const image = data.img[0];\r\n        const formData = new FormData();\r\n        formData.append('image',image);\r\n        const url = 'https://api.imgbb.com/1/upload?key=6b61fed2ade9e1cb6596b28fb4315762';\r\n        fetch(url, {\r\n            method: 'POST',\r\n            body:formData\r\n        })\r\n        .then(res => res.json())\r\n        .then(imageData => {\r\n\r\n            if(imageData.success){\r\n                const product = {\r\n                    name : data.name,\r\n                    mail : data.mail,\r\n                    price : data.price,\r\n                    rating : data.rating,\r\n                    description : data.description,\r\n                    img : imageData.data.url\r\n\r\n\r\n                }\r\n                console.log(product);\r\n\r\n\r\n                fetch('https://pro-motors.vercel.app/product', {\r\n                    method: 'POST',\r\n                    headers: {\r\n                       'content-type': 'application/json',\r\n                       authorization : ` Bearer ${localStorage.getItem('secret-token')}`\r\n                    },\r\n                    body: JSON.stringify(product)\r\n                })\r\n                    .then(res => res.json())\r\n                    .then(result => {\r\n                        console.log(result);\r\n                        setRefresh(!Refresh);\r\n                        swal({\r\n                          title: \"Good job!\",\r\n                          text: `${data.name} is successfully added`,\r\n                          icon: \"success\",\r\n                          button: \"DONE\",\r\n                        });\r\n                        navigate('/allService');\r\n                    })\r\n                    .catch(err => console.error(err));\r\n            }\r\n        });\r\n        \r\n\r\n    }\r\n  return (\r\n    <div className=\"flex justify-center  bg-gray-900\">\r\n      <div className=\"card w-96  bg-gray-900 shadow-2xl \">\r\n        <div className=\"card-body items-center text-center\">\r\n          <h1 className=\"text-2xl font-bold text-white\">ADD PRODUCT</h1>\r\n          <form\r\n            className=\"mt-6 text-center pb-6\"\r\n            onSubmit={handleSubmit(handleAddProduct)}\r\n          >\r\n            <input\r\n              className=\"input input-bordered w-full max-w-xs mt-6\"\r\n              value={user?.email}\r\n              {...register(\"mail\")}\r\n              type=\"text\"\r\n            />\r\n            <br />\r\n            <input\r\n              className=\"input input-bordered w-full max-w-xs mt-6\"\r\n              placeholder=\"name\"\r\n              {...register(\"name\", {\r\n                required: \"name is required\",\r\n              })}\r\n              type=\"text\"\r\n            />\r\n            {errors.name && (\r\n              <p className=\"text-red-600\">{errors.name?.message}</p>\r\n            )}\r\n            <br />\r\n            <input\r\n              className=\"input input-bordered w-full max-w-xs mt-6\"\r\n              placeholder=\"price\"\r\n              {...register(\"price\", { required: \"price is required\" })}\r\n              type=\"text\"\r\n            />\r\n            {errors.price && (\r\n              <p className=\"text-red-600\">{errors.price?.message}</p>\r\n            )}\r\n            <br />         \r\n            <input\r\n              className=\"input input-bordered w-full max-w-xs mt-6\"\r\n              placeholder=\"rating\"\r\n              {...register(\"rating\", { required: \"rating is required\" })}\r\n              type=\"text\"\r\n            />\r\n            {errors.rating && (\r\n              <p className=\"text-red-600\">{errors.rating?.message}</p>\r\n            )}\r\n            <br />\r\n            <input\r\n              className=\"input input-bordered w-full max-w-xs mt-6\"\r\n              placeholder=\"description\"\r\n              {...register(\"description\", {\r\n                required: \"description is required\",\r\n              })}\r\n              type=\"text\"\r\n            />\r\n            {errors.description && (\r\n              <p className=\"text-red-600\">{errors.description?.message}</p>\r\n            )}\r\n            <br />\r\n\r\n            <input\r\n              className=\"input input-bordered w-full max-w-xs mt-6\"\r\n              {...register(\"img\", { required: \"image is required\" })}\r\n              type=\"file\"\r\n              alt=\"img\"\r\n              placeholder=\"picture url\"\r\n            />\r\n            {errors.img && (\r\n              <p className=\"text-red-600\">{errors.img?.message}</p>\r\n            )}\r\n\r\n            <input\r\n              className=\"btn w-full max-w-xs mt-6 \"\r\n              value=\"Submit\"\r\n              type=\"submit\"\r\n            />  \r\n                 \r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddProduct;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}